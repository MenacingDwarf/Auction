{"version":3,"file":"messagepack.cjs.js","sources":["../src/error.ts","../src/tags.ts","../src/buffer.ts","../src/types.ts","../src/index.ts"],"sourcesContent":["import {Tag} from \"./tags\";\n\n\n\nexport function typeError(tag: Tag, expected: string): never {\n\tthrow new TypeError(`unexpected tag 0x${tag.toString(16)} (${expected} expected)`);\n}\n","\nexport const enum Tag {\n\tNil = 0xc0, // 11000000\n\n\t// bool\n\tFalse = 0xc2, // 11000010\n\tTrue  = 0xc3, // 11000011\n\n\t// int\n\tInt8  = 0xd0, // 11010000\n\tInt16 = 0xd1, // 11010001\n\tInt32 = 0xd2, // 11010010\n\tInt64 = 0xd3, // 11010011\n\n\t// uint\n\tUint8  = 0xcc, // 11001100\n\tUint16 = 0xcd, // 11001101\n\tUint32 = 0xce, // 11001110\n\tUint64 = 0xcf, // 11001111\n\n\t// float\n\tFloat32 = 0xca, // 11001010\n\tFloat64 = 0xcb, // 11001011\n\n\t// string\n\tStr8  = 0xd9, // 11011001\n\tStr16 = 0xda, // 11011010\n\tStr32 = 0xdb, // 11011011\n\n\t// binary\n\tBin8  = 0xc4, // 11000100\n\tBin16 = 0xc5, // 11000101\n\tBin32 = 0xc6, // 11000110\n\n\t// array\n\tArray16 = 0xdc, // 11011100\n\tArray32 = 0xdd, // 11011101\n\n\t// map\n\tMap16 = 0xde, // 11011110\n\tMap32 = 0xdf, // 11011111\n\n\t// ext\n\tExt8     = 0xc7, // 11000111\n\tExt16    = 0xc8, // 11001000\n\tExt32    = 0xc9, // 11001001\n\tFixExt1  = 0xd4, // 11010100\n\tFixExt2  = 0xd5, // 11010101\n\tFixExt4  = 0xd6, // 11010110\n\tFixExt8  = 0xd7, // 11010111\n\tFixExt16 = 0xd8, // 11011000\n}\n\n\n\n// positive fixint: 0xxx xxxx\nexport function posFixintTag(i: number): Tag {\n\treturn i & 0x7f;\n}\n\nexport function isPosFixintTag(tag: Tag): boolean {\n\treturn (tag & 0x80) === 0;\n}\n\nexport function readPosFixint(tag: Tag): number {\n\treturn tag & 0x7f\n}\n\n\n// negative fixint: 111x xxxx\nexport function negFixintTag(i: number): Tag {\n\treturn 0xe0 | (i & 0x1f);\n}\n\nexport function isNegFixintTag(tag: Tag): boolean {\n\treturn (tag & 0xe0) == 0xe0;\n}\n\nexport function readNegFixint(tag: Tag): number {\n\treturn tag - 0x100;\n}\n\n\n// fixstr: 101x xxxx\nexport function fixstrTag(length: number): Tag {\n\treturn 0xa0 | (length & 0x1f);\n}\n\nexport function isFixstrTag(tag: Tag): boolean {\n\treturn (tag & 0xe0) == 0xa0;\n}\n\nexport function readFixstr(tag: Tag): number {\n\treturn tag & 0x1f;\n}\n\n\n// fixarray: 1001 xxxx\nexport function fixarrayTag(length: number): Tag {\n\treturn 0x90 | (length & 0x0f);\n}\n\nexport function isFixarrayTag(tag: Tag): boolean {\n\treturn (tag & 0xf0) == 0x90;\n}\n\nexport function readFixarray(tag: Tag): number {\n\treturn tag & 0x0f;\n}\n\n\n// fixmap: 1000 xxxx\nexport function fixmapTag(length: number): Tag {\n\treturn 0x80 | (length & 0x0f);\n}\n\nexport function isFixmapTag(tag: Tag): boolean {\n\treturn (tag & 0xf0) == 0x80;\n}\n\nexport function readFixmap(tag: Tag): number {\n\treturn tag & 0x0f;\n}\n","import {typeError} from \"./error\";\nimport {\n\tTag,\n\tisPosFixintTag, isNegFixintTag,\n\tfixarrayTag, isFixarrayTag, readFixarray,\n\tfixmapTag, isFixmapTag, readFixmap,\n\tisFixstrTag, readFixstr,\n} from \"./tags\";\n\n\nexport interface WriteBuffer {\n\tput(v: BufferSource): void;\n\n\tputI8(v: number): void;\n\tputI16(v: number): void;\n\tputI32(v: number): void;\n\tputI64(v: number): void;\n\n\tputUi8(v: number): void;\n\tputUi16(v: number): void;\n\tputUi32(v: number): void;\n\tputUi64(v: number): void;\n\n\tputF(v: number): void;\n\n\tui8array(): Uint8Array;\n}\n\nexport interface ReadBuffer {\n\tpeek(): number; // returns next byte\n\tget(len: number): ArrayBuffer;\n\n\tgetI8(): number;\n\tgetI16(): number;\n\tgetI32(): number;\n\tgetI64(): number;\n\n\tgetUi8(): number;\n\tgetUi16(): number;\n\tgetUi32(): number;\n\tgetUi64(): number;\n\n\tgetF32(): number;\n\tgetF64(): number;\n}\n\n\n\nexport function createWriteBuffer(): WriteBuffer {\n\tlet view = new DataView(new ArrayBuffer(64));\n\tlet n = 0;\n\t\n\tfunction need(x: number): void {\n\t\tif(n+x > view.byteLength) {\n\t\t\tconst arr = new Uint8Array(Math.max(n+x, view.byteLength+64));\n\t\t\tarr.set(new Uint8Array(view.buffer.slice(0, n)));\n\t\t\tview = new DataView(arr.buffer);\n\t\t}\n\t}\n\n\treturn {\n\t\tput(v: ArrayBuffer): void {\n\t\t\tneed(v.byteLength);\n\t\t\t(new Uint8Array(view.buffer)).set(new Uint8Array(v), n);\n\t\t\tn += v.byteLength;\n\t\t},\n\n\t\tputI8(v: number): void {\n\t\t\tneed(1);\n\t\t\tview.setInt8(n, v);\n\t\t\t++n;\n\t\t},\n\n\t\tputI16(v: number): void {\n\t\t\tneed(2);\n\t\t\tview.setInt16(n, v);\n\t\t\tn += 2;\n\t\t},\n\n\t\tputI32(v: number): void {\n\t\t\tneed(4);\n\t\t\tview.setInt32(n, v);\n\t\t\tn += 4;\n\t\t},\n\n\t\tputI64(v: number): void {\n\t\t\tneed(8);\n\t\t\tconst neg = v < 0;\n\t\t\tif(neg) {\n\t\t\t\tv = -v;\n\t\t\t}\n\t\t\tlet hi = (v/0x100000000)|0;\n\t\t\tlet lo = (v%0x100000000)|0;\n\t\t\tif(neg) {\n\t\t\t\t// 2s complement\n\t\t\t\tlo = (~lo+1)|0;\n\t\t\t\thi = lo === 0 ? (~hi+1)|0 : ~hi;\n\t\t\t}\n\n\t\t\tview.setUint32(n, hi);\n\t\t\tview.setUint32(n+4, lo);\n\t\t\tn += 8;\n\t\t},\n\n\t\tputUi8(v: number): void {\n\t\t\tneed(1);\n\t\t\tview.setUint8(n, v);\n\t\t\t++n;\n\t\t},\n\n\t\tputUi16(v: number): void {\n\t\t\tneed(2);\n\t\t\tview.setUint16(n, v);\n\t\t\tn += 2;\n\t\t},\n\n\t\tputUi32(v: number): void {\n\t\t\tneed(4);\n\t\t\tview.setUint32(n, v);\n\t\t\tn += 4;\n\t\t},\n\n\t\tputUi64(v: number): void {\n\t\t\tneed(8);\n\t\t\tview.setUint32(n, (v/0x100000000)|0);\n\t\t\tview.setUint32(n+4, v%0x100000000);\n\t\t\tn += 8;\n\t\t},\n\n\t\tputF(v: number): void {\n\t\t\tneed(8);\n\t\t\tview.setFloat64(n, v);\n\t\t\tn += 8;\n\t\t},\n\n\t\tui8array(): Uint8Array {\n\t\t\treturn new Uint8Array(view.buffer.slice(0, n));\n\t\t},\n\t};\n}\n\n\nexport function createReadBuffer(buf: BufferSource): ReadBuffer {\n\tlet view = new DataView(ArrayBuffer.isView(buf) ? buf.buffer : buf);\n\tlet n = 0;\n\t\n\treturn {\n\t\tpeek(): number {\n\t\t\treturn view.getUint8(n);\n\t\t},\n\n\t\tget(len: number): ArrayBuffer {\n\t\t\tn += len;\n\t\t\treturn view.buffer.slice(n-len, n);\n\t\t},\n\n\t\tgetI8(): number {\n\t\t\treturn view.getInt8(n++);\n\t\t},\n\n\t\tgetI16(): number {\n\t\t\tn += 2;\n\t\t\treturn view.getInt16(n-2);\n\t\t},\n\n\t\tgetI32(): number {\n\t\t\tn += 4;\n\t\t\treturn view.getInt32(n-4);\n\t\t},\n\n\t\tgetI64(): number {\n\t\t\tn += 8;\n\t\t\tconst hi = view.getInt32(n-8);\n\t\t\tconst lo = view.getUint32(n-4);\n\t\t\treturn hi*0x100000000 + lo;\n\t\t},\n\n\t\tgetUi8(): number {\n\t\t\treturn view.getUint8(n++);\n\t\t},\n\n\t\tgetUi16(): number {\n\t\t\tn += 2;\n\t\t\treturn view.getUint16(n-2);\n\t\t},\n\n\t\tgetUi32(): number {\n\t\t\tn += 4;\n\t\t\treturn view.getUint32(n-4);\n\t\t},\n\n\t\tgetUi64(): number {\n\t\t\tn += 8;\n\t\t\tconst hi = view.getUint32(n-8);\n\t\t\tconst lo = view.getUint32(n-4);\n\t\t\treturn hi*0x100000000 + lo;\n\t\t},\n\n\t\tgetF32(): number {\n\t\t\tn += 4;\n\t\t\treturn view.getFloat32(n-4);\n\t\t},\n\n\t\tgetF64(): number {\n\t\t\tn += 8;\n\t\t\treturn view.getFloat64(n-8);\n\t\t},\n\t};\n}\n\n\nexport function putBlob(buf: WriteBuffer, blob: ArrayBuffer, baseTag: Tag): void {\n\tconst n = blob.byteLength;\n\tif(n <= 255) {\n\t\tbuf.putUi8(baseTag);\n\t\tbuf.putUi8(n);\n\t} else if(n <= 65535) {\n\t\tbuf.putUi8(baseTag + 1);\n\t\tbuf.putUi16(n);\n\t} else if(n <= 4294967295) {\n\t\tbuf.putUi8(baseTag + 2);\n\t\tbuf.putUi32(n);\n\t} else {\n\t\tthrow new RangeError(\"length limit exceeded\");\n\t}\n\tbuf.put(blob);\n}\n\n\nexport function getBlob(buf: ReadBuffer): ArrayBuffer {\n\tconst tag = buf.getUi8();\n\tlet n: number;\n\tswitch(tag) {\n\tcase Tag.Nil:\n\t\tn = 0;\n\t\tbreak;\n\tcase Tag.Bin8:\n\tcase Tag.Str8:\n\t\tn = buf.getUi8();\n\t\tbreak;\n\tcase Tag.Bin16:\n\tcase Tag.Str16:\n\t\tn = buf.getUi16();\n\t\tbreak;\n\tcase Tag.Bin32:\n\tcase Tag.Str32:\n\t\tn = buf.getUi32();\n\t\tbreak;\n\tdefault:\n\t\tif(!isFixstrTag(tag)) {\n\t\t\ttypeError(tag, \"bytes or string\");\n\t\t}\n\t\tn = readFixstr(tag);\n\t}\n\treturn buf.get(n);\n}\n\n\nexport function putArrHeader(buf: WriteBuffer, n: number): void {\n\tif(n < 16) {\n\t\tbuf.putUi8(fixarrayTag(n));\n\t} else {\n\t\tputCollectionHeader(buf, Tag.Array16, n);\n\t}\n}\n\n\nexport function getArrHeader(buf: ReadBuffer, expect?: number): number {\n\tconst tag = buf.getUi8();\n\tconst n = isFixarrayTag(tag)\n\t\t? readFixarray(tag)\n\t\t: getCollectionHeader(buf, tag, Tag.Array16, \"array\");\n\tif(expect != null && n !== expect) {\n\t\tthrow new Error(`invalid array header size ${n}`);\n\t}\n\treturn n;\n}\n\n\nexport function putMapHeader(buf: WriteBuffer, n: number): void {\n\tif(n < 16) {\n\t\tbuf.putUi8(fixmapTag(n));\n\t} else {\n\t\tputCollectionHeader(buf, Tag.Map16, n);\n\t}\n}\n\n\nexport function getMapHeader(buf: ReadBuffer, expect?: number): number {\n\tconst tag = buf.getUi8();\n\tconst n = isFixmapTag(tag)\n\t\t? readFixmap(tag)\n\t\t: getCollectionHeader(buf, tag, Tag.Map16, \"map\");\n\tif(expect != null && n !== expect) {\n\t\tthrow new Error(`invalid map header size ${n}`);\n\t}\n\treturn n;\n}\n\n\nfunction putCollectionHeader(buf: WriteBuffer, baseTag: Tag, n: number): void {\n\tif(n <= 65535) {\n\t\tbuf.putUi8(baseTag);\n\t\tbuf.putUi16(n);\n\t} else if(n <= 4294967295) {\n\t\tbuf.putUi8(baseTag + 1);\n\t\tbuf.putUi32(n);\n\t} else {\n\t\tthrow new RangeError(\"length limit exceeded\");\n\t}\n}\n\nfunction getCollectionHeader(buf: ReadBuffer, tag: Tag, baseTag: Tag, typename: string): number {\n\tswitch(tag) {\n\tcase Tag.Nil:\n\t\treturn 0;\n\tcase baseTag: // 16 bit\n\t\treturn buf.getUi16();\n\tcase baseTag + 1: // 32 bit\n\t\treturn buf.getUi32();\n\tdefault:\n\t\ttypeError(tag, typename);\n\t}\n}\n\n\nexport function getRaw(buf: ReadBuffer, res: WriteBuffer): void {\n\tlet n;\n\tconst tag = buf.getUi8();\n\tres.putUi8(tag);\n\n\tswitch(tag) {\n\tcase Tag.Nil:\n\tcase Tag.False:\n\tcase Tag.True:\n\t\tbreak;\n\n\tcase Tag.Int8:\n\tcase Tag.Uint8:\n\t\tres.putUi8(buf.getUi8());\n\t\tbreak;\n\n\tcase Tag.Int16:\n\tcase Tag.Uint16:\n\t\tres.putUi16(buf.getUi16());\n\t\tbreak;\n\n\tcase Tag.Int32:\n\tcase Tag.Uint32:\n\tcase Tag.Float32:\n\t\tres.putUi32(buf.getUi32());\n\t\tbreak;\n\n\tcase Tag.Int64:\n\tcase Tag.Uint64:\n\tcase Tag.Float64:\n\t\tres.putUi64(buf.getUi64());\n\t\tbreak;\n\n\tcase Tag.Str8:\n\tcase Tag.Bin8:\n\t\tres.putUi8(n = buf.getUi8());\n\t\tres.put(buf.get(n));\n\t\tbreak;\n\n\tcase Tag.Str16:\n\tcase Tag.Bin16:\n\t\tres.putUi16(n = buf.getUi16());\n\t\tres.put(buf.get(n));\n\t\tbreak;\n\n\tcase Tag.Str32:\n\tcase Tag.Bin32:\n\t\tres.putUi32(n = buf.getUi32());\n\t\tres.put(buf.get(n));\n\t\tbreak;\n\n\tcase Tag.Array16:\n\t\tres.putUi16(n = buf.getUi16());\n\t\tfor(let i = 0; i < n; ++i) {\n\t\t\tgetRaw(buf, res);\n\t\t}\n\t\tbreak;\n\n\tcase Tag.Array32:\n\t\tres.putUi32(n = buf.getUi32());\n\t\tfor(let i = 0; i < n; ++i) {\n\t\t\tgetRaw(buf, res);\n\t\t}\n\t\tbreak;\n\n\tcase Tag.Map16:\n\t\tres.putUi16(n = buf.getUi16());\n\t\tfor(let i = 0; i < 2*n; ++i) {\n\t\t\tgetRaw(buf, res);\n\t\t}\n\t\tbreak;\n\n\tcase Tag.Map32:\n\t\tres.putUi32(n = buf.getUi32());\n\t\tfor(let i = 0; i < 2*n; ++i) {\n\t\t\tgetRaw(buf, res);\n\t\t}\n\t\tbreak;\n\n\tcase Tag.FixExt1:\n\t\tres.put(buf.get(2))\n\t\tbreak;\n\n\tcase Tag.FixExt2:\n\t\tres.put(buf.get(3))\n\t\tbreak;\n\n\tcase Tag.FixExt4:\n\t\tres.put(buf.get(5))\n\t\tbreak;\n\n\tcase Tag.FixExt8:\n\t\tres.put(buf.get(9))\n\t\tbreak;\n\n\tcase Tag.FixExt16:\n\t\tres.put(buf.get(17))\n\t\tbreak;\n\n\tcase Tag.Ext8:\n\t\tres.putUi8(n = buf.getUi8());\n\t\tres.put(buf.get(1 + n));\n\t\tbreak;\n\n\tcase Tag.Ext16:\n\t\tres.putUi16(n = buf.getUi16());\n\t\tres.put(buf.get(1 + n));\n\t\tbreak;\n\n\tcase Tag.Ext32:\n\t\tres.putUi32(n = buf.getUi32());\n\t\tres.put(buf.get(1 + n));\n\t\tbreak;\n\n\tdefault:\n\t\tif(isPosFixintTag(tag) || isNegFixintTag(tag)) {\n\t\t\t// do nothing\n\t\t} else if(isFixstrTag(tag)) {\n\t\t\tres.put(buf.get(readFixstr(tag)));\n\t\t} else if(isFixarrayTag(tag)) {\n\t\t\tn = readFixarray(tag);\n\t\t\tfor(let i = 0; i < n; ++i) {\n\t\t\t\tgetRaw(buf, res);\n\t\t\t}\n\t\t} else if(isFixmapTag(tag)) {\n\t\t\tn = 2 * readFixmap(tag);\n\t\t\tfor(let i = 0; i < n; ++i) {\n\t\t\t\tgetRaw(buf, res);\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError(`unknown tag 0x${tag.toString(16)}`);\n\t\t}\n\t}\n}\n","import {typeError} from \"./error\";\nimport {\n\tWriteBuffer, ReadBuffer, createWriteBuffer,\n\tputBlob, getBlob,\n\tputArrHeader, getArrHeader,\n\tputMapHeader, getMapHeader,\n\tgetRaw,\n} from \"./buffer\";\nimport {\n\tTag,\n\tposFixintTag, isPosFixintTag, readPosFixint,\n\tnegFixintTag, isNegFixintTag, readNegFixint,\n\tfixstrTag, isFixstrTag, isFixarrayTag, isFixmapTag,\n} from \"./tags\";\n\n\n\nexport type EncodeFunc<T> = (buf: WriteBuffer, v: T) => void;\nexport type DecodeFunc<T> = (buf: ReadBuffer) => T;\n\nexport interface Type<T> {\n\treadonly enc: EncodeFunc<T>;\n\treadonly dec: DecodeFunc<T>;\n}\n\nexport interface Collection<T> extends Type<T> {\n\tencHeader(buf: WriteBuffer, len: number): void;\n\tdecHeader(buf: ReadBuffer, expect?: number): number;\n}\n\nexport type Obj<T> = {[key: string]: T};\n\nexport type Field = [string, Type<any>]; // (name, type)\nexport type Fields = {readonly [ordinal: number]: Field};\n\nexport interface Branches {\n\treadonly [ordinal: number]: Type<any>;\n\tordinalOf(v: any): number;\n};\n\n\n\nexport const Any: Type<any> = {\n\tenc(buf: WriteBuffer, v: any): void {\n\t\ttypeOf(v).enc(buf, v);\n\t},\n\n\tdec(buf: ReadBuffer): any {\n\t\treturn tagType(buf.peek()).dec(buf);\n\t},\n};\n\n\nexport const Nil: Type<null> = {\n\tenc(buf: WriteBuffer, v: null): void {\n\t\tbuf.putUi8(Tag.Nil);\n\t},\n\n\tdec(buf: ReadBuffer): null {\n\t\tconst tag = buf.getUi8();\n\t\tif(tag !== Tag.Nil) {\n\t\t\ttypeError(tag, \"nil\");\n\t\t}\n\t\treturn null;\n\t},\n};\n\n\nexport const Bool: Type<boolean> = {\n\tenc(buf: WriteBuffer, v: boolean): void {\n\t\tbuf.putUi8(v ? Tag.True : Tag.False);\n\t},\n\n\tdec(buf: ReadBuffer): boolean {\n\t\tconst tag = buf.getUi8();\n\t\tswitch(tag) {\n\t\tcase Tag.Nil:\n\t\tcase Tag.False:\n\t\t\treturn false;\n\t\tcase Tag.True:\n\t\t\treturn true;\n\t\tdefault:\n\t\t\ttypeError(tag, \"bool\");\n\t\t}\n\t},\n};\n\n\nexport const Int: Type<number> = {\n\tenc(buf: WriteBuffer, v: number): void {\n\t\tif(-128 <= v && v <= 127) {\n\t\t\tif(v >= 0) {\n\t\t\t\tbuf.putUi8(posFixintTag(v));\n\t\t\t} else if(v > -32) {\n\t\t\t\tbuf.putUi8(negFixintTag(v));\n\t\t\t} else {\n\t\t\t\tbuf.putUi8(Tag.Int8);\n\t\t\t\tbuf.putUi8(v);\n\t\t\t}\n\t\t} else if(-32768 <= v && v <= 32767) {\n\t\t\tbuf.putI8(Tag.Int16);\n\t\t\tbuf.putI16(v);\n\t\t} else if(-2147483648 <= v && v <= 2147483647) {\n\t\t\tbuf.putI8(Tag.Int32);\n\t\t\tbuf.putI32(v);\n\t\t} else {\n\t\t\tbuf.putI8(Tag.Int64);\n\t\t\tbuf.putI64(v);\n\t\t}\n\t},\n\n\tdec(buf: ReadBuffer): number {\n\t\tconst tag = buf.getUi8();\n\t\tif(isPosFixintTag(tag)) {\n\t\t\treturn readPosFixint(tag);\n\t\t} else if(isNegFixintTag(tag)) {\n\t\t\treturn readNegFixint(tag);\n\t\t}\n\n\t\tswitch(tag) {\n\t\tcase Tag.Nil:\n\t\t\treturn 0;\n\n\t\t// signed int types\n\t\tcase Tag.Int8:\n\t\t\treturn buf.getI8();\n\t\tcase Tag.Int16:\n\t\t\treturn buf.getI16();\n\t\tcase Tag.Int32:\n\t\t\treturn buf.getI32();\n\t\tcase Tag.Int64:\n\t\t\treturn buf.getI64();\n\n\t\t// unsigned int types\n\t\tcase Tag.Uint8:\n\t\t\treturn buf.getUi8();\n\t\tcase Tag.Uint16:\n\t\t\treturn buf.getUi16();\n\t\tcase Tag.Uint32:\n\t\t\treturn buf.getUi32();\n\t\tcase Tag.Uint64:\n\t\t\treturn buf.getUi64();\n\n\t\tdefault:\n\t\t\ttypeError(tag, \"int\");\n\t\t}\n\t},\n};\n\n\nexport const Uint: Type<number> = {\n\tenc(buf: WriteBuffer, v: number): void {\n\t\tif(v < 0) {\n\t\t\tthrow new Error(`not an uint: ${v}`);\n\t\t} else if(v <= 127) {\n\t\t\tbuf.putUi8(posFixintTag(v));\n\t\t} else if(v <= 255) {\n\t\t\tbuf.putUi8(Tag.Uint8);\n\t\t\tbuf.putUi8(v);\n\t\t} else if(v <= 65535) {\n\t\t\tbuf.putUi8(Tag.Uint16);\n\t\t\tbuf.putUi16(v);\n\t\t} else if(v <= 4294967295) {\n\t\t\tbuf.putUi8(Tag.Uint32);\n\t\t\tbuf.putUi32(v);\n\t\t} else {\n\t\t\tbuf.putUi8(Tag.Uint64);\n\t\t\tbuf.putUi64(v);\n\t\t}\n\t},\n\n\tdec(buf: ReadBuffer): number {\n\t\tconst v = Int.dec(buf);\n\t\tif(v < 0) {\n\t\t\tthrow new RangeError(\"uint underflow\");\n\t\t}\n\t\treturn v;\n\t},\n};\n\n\nexport const Float: Type<number> = {\n\tenc(buf: WriteBuffer, v: number): void {\n\t\tbuf.putUi8(Tag.Float64);\n\t\tbuf.putF(v);\n\t},\n\n\tdec(buf: ReadBuffer): number {\n\t\tconst tag = buf.getUi8();\n\t\tswitch(tag) {\n\t\tcase Tag.Nil:\n\t\t\treturn 0;\n\t\tcase Tag.Float32:\n\t\t\treturn buf.getF32();\n\t\tcase Tag.Float64:\n\t\t\treturn buf.getF64();\n\t\tdefault:\n\t\t\ttypeError(tag, \"float\");\n\t\t}\n\t},\n};\n\n\nexport const Bytes: Type<ArrayBuffer> = {\n\tenc(buf: WriteBuffer, v: ArrayBuffer): void {\n\t\tputBlob(buf, v, Tag.Bin8);\n\t},\n\n\tdec: getBlob,\n};\n\n\nexport const Str: Type<string> = {\n\tenc(buf: WriteBuffer, v: string): void {\n\t\tconst utf8 = toUTF8(v);\n\t\tif(utf8.byteLength < 32) {\n\t\t\tbuf.putUi8(fixstrTag(utf8.byteLength));\n\t\t\tbuf.put(utf8);\n\t\t} else {\n\t\t\tputBlob(buf, utf8, Tag.Str8);\n\t\t}\n\t},\n\n\tdec(buf: ReadBuffer): string {\n\t\treturn fromUTF8(getBlob(buf));\n\t},\n};\n\n\nexport const Raw: Type<ArrayBuffer> = {\n\tenc(buf: WriteBuffer, v: ArrayBuffer): void {\n\t\tbuf.put(v);\n\t},\n\n\tdec(buf: ReadBuffer): ArrayBuffer {\n\t\tconst res = createWriteBuffer();\n\t\tgetRaw(buf, res);\n\t\tconst arr = res.ui8array();\n\t\treturn arr.buffer.slice(0, arr.length);\n\t},\n};\n\n\nexport const Time: Type<Date> = {\n\tenc(buf: WriteBuffer, v: Date): void {\n\t\tconst ms = v.getTime();\n\t\tbuf.putUi8(Tag.Ext8);\n\t\tbuf.putUi8(12);\n\t\tbuf.putI8(-1);\n\t\tbuf.putUi32((ms%1000)*1000000);\n\t\tbuf.putI64(ms/1000);\n\t},\n\n\tdec(buf: ReadBuffer): Date {\n\t\tconst tag = buf.getUi8();\n\t\tswitch(tag) {\n\t\tcase Tag.FixExt4: // 32-bit seconds\n\t\t\tif(buf.getI8() === -1) {\n\t\t\t\treturn new Date(buf.getUi32() * 1000);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase Tag.FixExt8: // 34-bit seconds + 30-bit nanoseconds\n\t\t\tif(buf.getI8() === -1) {\n\t\t\t\tconst lo = buf.getUi32();\n\t\t\t\tconst hi = buf.getUi32();\n\t\t\t\t// seconds: hi + (lo&0x3)*0x100000000\n\t\t\t\t// nanoseconds: lo>>2 == lo/4\n\t\t\t\treturn new Date((hi + (lo&0x3)*0x100000000)*1000 + lo/4000000);\n\t\t\t}\n\t\t\tbreak;\n\t\tcase Tag.Ext8: // 64-bit seconds + 32-bit nanoseconds\n\t\t\tif(buf.getUi8() === 12 && buf.getI8() === -1) {\n\t\t\t\tconst ns = buf.getUi32();\n\t\t\t\tconst s = buf.getI64();\n\t\t\t\treturn new Date(s*1000 + ns/1000000);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t\ttypeError(tag, \"time\");\n\t},\n};\n\n\nexport const Arr = TypedArr(Any);\nexport const Map = TypedMap(Any, Any);\n\n\nexport function TypedArr<T>(valueT: Type<T>): Collection<T[]> {\n\treturn {\n\t\tencHeader: putArrHeader,\n\t\tdecHeader: getArrHeader,\n\n\t\tenc(buf: WriteBuffer, v: T[]): void {\n\t\t\tputArrHeader(buf, v.length);\n\t\t\tv.forEach(x => valueT.enc(buf, x));\n\t\t},\n\n\t\tdec(buf: ReadBuffer): T[] {\n\t\t\tconst res = [];\n\t\t\tfor(let n = getArrHeader(buf); n > 0; --n) {\n\t\t\t\tres.push(valueT.dec(buf));\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t};\n}\n\n\nexport function TypedMap<V>(keyT: Type<number|string>, valueT: Type<V>): Collection<Obj<V>> {\n\treturn {\n\t\tencHeader: putMapHeader,\n\t\tdecHeader: getMapHeader,\n\n\t\tenc(buf: WriteBuffer, v: Obj<V>): void {\n\t\t\tconst props = Object.keys(v);\n\t\t\tputMapHeader(buf, props.length);\n\t\t\tprops.forEach(p => {\n\t\t\t\tkeyT.enc(buf, p);\n\t\t\t\tvalueT.enc(buf, v[p]);\n\t\t\t});\n\t\t},\n\n\t\tdec(buf: ReadBuffer): Obj<V> {\n\t\t\tconst res = {};\n\t\t\tfor(let n = getMapHeader(buf); n > 0; --n) {\n\t\t\t\tconst k = keyT.dec(buf);\n\t\t\t\tres[k] = valueT.dec(buf);\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t};\n}\n\n\nexport function structEncoder(fields: Fields): EncodeFunc<any> {\n\tconst ordinals = Object.keys(fields);\n\n\treturn (buf: WriteBuffer, v: any): void => {\n\t\tputMapHeader(buf, ordinals.length);\n\t\tordinals.forEach(ord => {\n\t\t\tconst f = fields[ord];\n\t\t\tInt.enc(buf, Number(ord));\n\t\t\tf[1].enc(buf, v[f[0]]);\n\t\t});\n\t};\n}\n\nexport function structDecoder(fields: Fields): DecodeFunc<any> {\n\treturn (buf: ReadBuffer): any => {\n\t\tconst res = {};\n\t\tfor(let n = getMapHeader(buf); n > 0; --n) {\n\t\t\tconst f = fields[Int.dec(buf)];\n\t\t\tif(f) {\n\t\t\t\tres[f[0]] = f[1].dec(buf);\n\t\t\t} else {\n\t\t\t\tAny.dec(buf);\n\t\t\t}\n\t\t}\n\t\treturn res;\n\t};\n}\n\nexport function Struct(fields: Fields): Type<Obj<any>> {\n\treturn {\n\t\tenc: structEncoder(fields),\n\t\tdec: structDecoder(fields),\n\t};\n}\n\n\nexport function unionEncoder(branches: Branches): EncodeFunc<any> {\n\treturn (buf: WriteBuffer, v: any): void => {\n\t\tputArrHeader(buf, 2);\n\n\t\tconst ord = branches.ordinalOf(v);\n\t\tInt.enc(buf, ord);\n\t\tbranches[ord].enc(buf, v);\n\t};\n}\n\nexport function unionDecoder(branches: Branches): DecodeFunc<any> {\n\treturn (buf: ReadBuffer): any => {\n\t\tgetArrHeader(buf, 2);\n\n\t\tconst t = branches[Int.dec(buf)];\n\t\tif(!t) {\n\t\t\tthrow new TypeError(\"invalid union type\");\n\t\t}\n\t\treturn t.dec(buf);\n\t};\n}\n\nexport function Union(branches: Branches): Type<any> {\n\treturn {\n\t\tenc: unionEncoder(branches),\n\t\tdec: unionDecoder(branches),\n\t};\n}\n\n\nfunction toUTF8(v: string): ArrayBuffer {\n\tconst n = v.length;\n\tconst bin = new Uint8Array(4*n);\n\n\tlet pos = 0, i = 0, c: number;\n\twhile(i < n) {\n\t\tc = v.charCodeAt(i++);\n\t\tif((c & 0xfc00) === 0xd800) {\n\t\t\tc = (c<<10) + v.charCodeAt(i++) - 0x35fdc00;\n\t\t}\n\n\t\tif(c < 0x80) {\n\t\t\tbin[pos++] = c;\n\t\t} else if(c < 0x800) {\n\t\t\tbin[pos++] = 0xc0 + (c >> 6);\n\t\t\tbin[pos++] = 0x80 + (c & 0x3f);\n\t\t} else if(c < 0x10000) {\n\t\t\tbin[pos++] = 0xe0 + (c >> 12);\n\t\t\tbin[pos++] = 0x80 + ((c>>6) & 0x3f);\n\t\t\tbin[pos++] = 0x80 + (c & 0x3f);\n\t\t} else {\n\t\t\tbin[pos++] = 0xf0 + (c >> 18);\n\t\t\tbin[pos++] = 0x80 + ((c>>12) & 0x3f);\n\t\t\tbin[pos++] = 0x80 + ((c>>6) & 0x3f);\n\t\t\tbin[pos++] = 0x80 + (c & 0x3f);\n\t\t}\n\t}\n\treturn bin.buffer.slice(0, pos);\n}\n\nfunction fromUTF8(buf: ArrayBuffer): string {\n\tconst bin = new Uint8Array(buf);\n\tlet n: number, c: number, codepoints = [];\n\tfor(let i = 0; i < bin.length;) {\n\t\tc = bin[i++];\n\t\tn = 0;\n\t\tswitch(c & 0xf0) {\n\t\tcase 0xf0:  n = 3; break;\n\t\tcase 0xe0:  n = 2; break;\n\t\tcase 0xd0:\n\t\tcase 0xc0:  n = 1; break;\n\t\t}\n\n\t\tif(n !== 0) {\n\t\t\tc &= (1 << (6-n)) - 1;\n\t\t\tfor(let k = 0; k < n; ++k) {\n\t\t\t\tc = (c<<6) + (bin[i++] & 0x3f);\n\t\t\t}\n\t\t}\n\t\tcodepoints.push(c);\n\t}\n\treturn String.fromCodePoint.apply(null, codepoints);\n}\n\nfunction typeOf(v: any): Type<any> {\n\tswitch(typeof v) {\n\tcase \"undefined\":\n\t\treturn Nil;\n\tcase \"boolean\":\n\t\treturn Bool;\n\tcase \"number\":\n\t\treturn !isFinite(v) || Math.floor(v) !== v ? Float\n\t\t\t: v < 0 ? Int\n\t\t\t: Uint;\n\tcase \"string\":\n\t\treturn Str;\n\tcase \"object\":\n\t\treturn v === null ? Nil\n\t\t\t: Array.isArray(v) ? Arr\n\t\t\t: v instanceof Uint8Array || v instanceof ArrayBuffer ? Bytes\n\t\t\t: v instanceof Date ? Time\n\t\t\t: Map;\n\tdefault:\n\t\tthrow new TypeError(`unsupported type ${typeof v}`);\n\t}\n}\n\nfunction tagType(tag: Tag): Type<any> {\n\tswitch(tag) {\n\tcase Tag.Nil:\n\t\treturn Nil;\n\tcase Tag.False:\n\tcase Tag.True:\n\t\treturn Bool;\n\tcase Tag.Int8:\n\tcase Tag.Int16:\n\tcase Tag.Int32:\n\tcase Tag.Int64:\n\t\treturn Int;\n\tcase Tag.Uint8:\n\tcase Tag.Uint16:\n\tcase Tag.Uint32:\n\tcase Tag.Uint64:\n\t\treturn Uint;\n\tcase Tag.Float32:\n\tcase Tag.Float64:\n\t\treturn Float;\n\tcase Tag.Bin8:\n\tcase Tag.Bin16:\n\tcase Tag.Bin32:\n\t\treturn Bytes;\n\tcase Tag.Str8:\n\tcase Tag.Str16:\n\tcase Tag.Str32:\n\t\treturn Str;\n\tcase Tag.Array16:\n\tcase Tag.Array32:\n\t\treturn Arr;\n\tcase Tag.Map16:\n\tcase Tag.Map32:\n\t\treturn Map;\n\tcase Tag.FixExt4:\n\tcase Tag.FixExt8:\n\tcase Tag.Ext8:\n\t\treturn Time;\n\tdefault:\n\t\tif(isPosFixintTag(tag) || isNegFixintTag(tag)) {\n\t\t\treturn Int;\n\t\t}\n\t\tif(isFixstrTag(tag)) {\n\t\t\treturn Str;\n\t\t}\n\t\tif(isFixarrayTag(tag)) {\n\t\t\treturn Arr;\n\t\t}\n\t\tif(isFixmapTag(tag)) {\n\t\t\treturn Map;\n\t\t}\n\t\tthrow new TypeError(`unsupported tag ${tag}`);\n\t}\n}\n","import {\n\tType, Collection, Obj,\n\tNil, Bool, Int, Uint, Float, Bytes, Str, TypedArr, TypedMap, Time, Any, Arr, Map, Struct, Union,\n\tstructEncoder, structDecoder, unionEncoder, unionDecoder,\n} from \"./types\";\nimport {\n\tWriteBuffer, ReadBuffer,\n\tcreateWriteBuffer, createReadBuffer,\n} from \"./buffer\";\n\n\nexport {\n\tWriteBuffer, ReadBuffer,\n\tType, Collection, Obj,\n\tNil, Bool, Int, Uint, Float, Bytes, Str, TypedArr, TypedMap, Time, Any, Arr, Map, Struct, Union,\n\tstructEncoder, structDecoder, unionEncoder, unionDecoder,\n\tencode, decode,\n};\n\n\n\n\n\n\nfunction encode<T>(v: T, typ?: Type<T>): Uint8Array {\n\tconst buf = createWriteBuffer();\n\t(typ || Any).enc(buf, v);\n\treturn buf.ui8array();\n}\n\n\n\nfunction decode<T>(buf: BufferSource, typ?: Type<T>): T {\n\treturn (typ || Any).dec(createReadBuffer(buf));\n}\n"],"names":[],"mappings":"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"}